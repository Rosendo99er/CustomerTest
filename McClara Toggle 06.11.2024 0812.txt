<style>




/* +++Position unten rechts +++ */

#toggle-chatbot-button {
    position: fixed;
    bottom: 20px;
    right: 100px;
}

#toggle-button-container {
    display: none;
}


/* +++Position unten rechts Ende +++ */



/* +++Position am Ort  +++ 

#toggle-button-container {
    display: flex;
}

#toggle-chatbot-button {
    position: relative;
    margin-top: 10px;
    margin-bottom: 10px;
}

 +++Position am Ort Ende +++ */




    



/* Container, der den Button umschließt */
#toggle-button-container {
    display: flex; /* Aktiviert Flexbox für den Container */
    justify-content: center; /* Zentriert den Button horizontal */
    align-items: center; /* Zentriert den Button vertikal */
    width: 100%; /* Der Container nimmt die volle Breite ein */
    height: 100%; /* Der Container nimmt die volle Höhe ein */
    position: relative; /* Hält die Position des Containers im Dokumentfluss */
}


#toggle-chatbot-button {
    width: 100px; /* Breite des Buttons */
    height: 100px; /* Höhe des Buttons */
    background-image: var(--clara-image-url); /* Verwende das Clara-Bild als Hintergrundbild beim umschalten*/
    background-color: var(--secondary-background-color);
    background-size: cover; /* Passt das Bild an die Größe des Buttons an */
    background-position: center; /* Zentriert das Bild innerhalb des Buttons */
    border: none; /* Entfernt den Rahmen */
    border-radius: 50%; /* Macht den Button rund */
    cursor: pointer; /* Zeigt an, dass es sich um einen anklickbaren Button handelt */
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); /* Fügt einen leichten Schatten hinzu */
    padding-bottom: 0px;
}

#toggle-chatbot-button span {
    position: absolute; /* Ermöglicht das absolute Positionieren des Textes */
    bottom: 5px; /* Abstand des Textes vom unteren Rand */
    left: 50%; /* Horizontale Zentrierung */
    transform: translateX(-50%); /* Exakte Zentrierung */
    font-weight: normal; /* Macht die Schrift fett */
    font-size: 14px; /* Schriftgröße für den Text */
    color: white; /* Weiße Schriftfarbe */
    text-align: center; /* Text wird mittig ausgerichtet */
}


#toggle-chatbot-button:hover {
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2); /* Vergrößert den Schatten bei Hover */
    transform: scale(1.05); /* Leichtes Vergrößern bei Hover */
}

#toggle-container {
    width: 1000px;
    height: 800px;
    min-width: 1000px;
    min-height: 800px;
    max-width: 1000px;
    max-height: 800px;
    display: none; /* Standardmäßig unsichtbar */
    position: fixed; /* Ermöglicht genaue Positionierung relativ zum Viewport */
    top: 50%; /* Vertikale Zentrierung */
    left: 50%; /* Horizontale Zentrierung */
    transform: translate(-50%, -50%); /* Verschiebt den Container um die Hälfte seiner Breite und Höhe zurück, um ihn perfekt zu zentrieren */
    background-color: var(--secondary-background-color);
    border: 2px solid var(--secondary-border-color);
    border-radius: var(--primary-border-radius);
    cursor: move; /* Zeigt, dass der Container verschoben werden kann */
    overflow: hidden; /* Verhindert, dass der Container größer wird, als seine inneren Inhalte */
    box-sizing: border-box; /* Bezieht Padding und Border in die Größenberechnung ein */
    padding: 10px; /* Entfernt jegliches Padding, um den Rahmen eng am Inhalt zu halten */
    margin: 0; /* Entfernt jegliche äußeren Abstände */
    z-index: 100000;
    flex-direction: column;
    align-items: stretch;
}

#clara-image {
  background-image: var(--clara-image-url);
  background-size: cover; /* Damit das Bild den gesamten Container ausfüllt */
  background-repeat: no-repeat;
  background-position: center;
  width: 20%;
  height: 0; /* Höhe wird durch Padding simuliert */
  padding-bottom: 20%; /* Höhe wird durch das Verhältnis der Breite bestimmt */
  margin-right: 0px;
  margin-top: 5px;
  border-radius: var(--primary-border-radius); /* Abgerundete Ecken */
  overflow: hidden; /* Verhindert, dass das Bild über die abgerundeten Ecken hinaus angezeigt wird */
}


#chatbot-consent-checkbox {
  background-color: #fff;
}


</style>

<div id="toggle-button-container">
  <button id="toggle-chatbot-button" onclick="toggleVisibility()">
    <span>Chat mit Clara</span>
  </button>
</div>

<script>



function toggleVisibility() {
    var container = document.getElementById("toggle-container");
    var button = document.getElementById("toggle-chatbot-button");
    var spanText = button.querySelector("span");

    if (container.style.display === "none" || container.style.display === "") {
        // Chat öffnen: Bild entfernen, Text zentrieren
        container.style.display = "block";
        centerChatbot(); // Stelle sicher, dass der Chatbot beim Einblenden zentriert ist
        button.style.backgroundImage = "none"; // Entferne das Clara-Bild
        button.style.backgroundColor = "var(--secondary-button-color)";
        button.style.display = "flex"; // Nutze Flexbox, um Text zu zentrieren
        button.style.justifyContent = "center"; // Zentriere Text horizontal
        button.style.alignItems = "center"; // Zentriere Text vertikal
        spanText.textContent = "Chat schließen"; // Ändere den Text zu "Chat schließen"
        spanText.style.position = "static"; // Entferne die absolute Positionierung für zentrierten Text
        spanText.style.fontWeight = "normal"; // Text fett für "Chat schließen"
        spanText.style.fontSize = "var(--font-size-finePrint)"; // Größere Schrift für "Chat schließen"
        spanText.style.color = "white"; // Behalte die weiße Schriftfarbe bei
        spanText.style.transform = "none"; // Entferne Transformation
         
    } else {
        // Chat schließen: Bild wiederherstellen, ursprüngliche Positionierung
        container.style.display = "none";
        button.style.backgroundImage = "var(--clara-image-url)"; // Bild von Clara anzeigen
        button.style.backgroundColor = "";
        button.style.display = "block"; // Rückkehr zur ursprünglichen Darstellung (kein Flexbox)
        spanText.textContent = "Chat mit Clara"; // Ändere den Text zurück zu "Chat mit Clara"
        spanText.style.position = "absolute"; // Ursprüngliche Positionierung wiederherstellen
        spanText.style.bottom = "5px"; // Abstand vom unteren Rand
        spanText.style.left = "50%"; // Horizontale Zentrierung
        spanText.style.transform = "translateX(-50%)"; // Text wieder zentrieren
        spanText.style.fontWeight = "normal"; // Normales Schriftgewicht
        spanText.style.fontSize = "14px"; // Kleinere Schriftgröße wiederherstellen
        spanText.style.color = "white"; // Weiße Schriftfarbe behalten
        
    }
}




// Funktion zum Verschieben des Chatbots in die Mitte
function centerChatbot() {
  var container = document.getElementById("toggle-container");
  container.style.top = "50%";
  container.style.left = "50%";
  container.style.transform = "translate(-50%, -50%)";
}


document.getElementById("toggle-container").onmousedown = function(event) {
  dragElement(event, this);
};

function dragElement(event, element) {
  var pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;
  
  pos3 = event.clientX;
  pos4 = event.clientY;
  
  document.onmousemove = function(e) {
    e.preventDefault();
    pos1 = pos3 - e.clientX;
    pos2 = pos4 - e.clientY;
    pos3 = e.clientX;
    pos4 = e.clientY;
    element.style.top = (element.offsetTop - pos2) + "px";
    element.style.left = (element.offsetLeft - pos1) + "px";
  };
  
  document.onmouseup = function() {
    document.onmousemove = null;
    document.onmouseup = null;
  };
}

// Zurücksetzen des Chatbot-Containers bei Fenstergrößenänderung
window.onresize = function() {
  centerChatbot(); // Ruft die Funktion auf, um den Chatbot in die Mitte zu setzen
};

</script>
